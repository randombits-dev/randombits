---
import Article from './Article.astro'; import {getCollection} from "astro:content";

const {limit} = Astro.props;

const posts = (await getCollection('articles')).filter(item => !item.data.draft).sort(
    (a, b) => new Date(b.data.published).valueOf() - new Date(a.data.published).valueOf()
);
// Use Astro.glob() to fetch all posts, and then sort them by date.
// const posts = (await Astro.glob('../pages/articles/*.{md,mdx}')).filter(item => !item.frontmatter.draft)

const postsToShow = limit ? posts.slice(0, limit) : posts;
---

{
    postsToShow.map((post) => (
    <Article article={post.data} url={'/articles/' + post.slug}/>
        ))
    }
